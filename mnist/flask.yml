- name: Pull Docker image for Flask app
  tags:
    - pull-flask
    - pull-all
  docker_image:
    name: erikperkins/flask_app

- name: Start Flask container
  tags:
    - start-flask
    - start-all
  docker_container:
    name: flask
    image: erikperkins/flask_app
    command: uwsgi --ini uwsgi.ini
    restart_policy: on-failure
    ports:
      - 80:80

- name: Stop Flask container
  tags:
    - stop-flask
    - stop-all
  docker_container:
    name: flask
    state: absent
